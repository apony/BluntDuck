<template>
    <div>
        <app-header :title="title" :leftSlot="leftSlot" :rightSlot="rightSlot"></app-header>
        <div class="page">
            <div>Èü≥‰πê</div>
        </div>
        <keep-alive>
            <aplayer ref="player" @click.native="openDetail"
                :music="playList[0]"
                :list="playList"
                repeat="list"
                autoplay shuffle listFolded preload showLrc
            />
        </keep-alive>
        <router-view></router-view>
    </div>
</template>

<script>
import bus from '@utils/pubsub.js'
export default {
    data(){
        return{
            title: this.$route.params.title || 'Èü≥‰πê',
            leftSlot: {
                mode:'left',
                content:'',
                tolink:'article',
                iconf:'back'
            },
            rightSlot: {
                mode:'right',
                content:'',
                tolink:'search',
                iconf:'search'
            },
            playList:[{
                id:'0',
                title: 'ÂèØ‰∏çÂèØ‰ª•',
                artist: 'Âº†Á¥´Ë±™',
                src: 'http://www.ytmp3.cn/down/53836.mp3',
                pic: 'https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1539765514&di=cfc0abef140fe1e8cb06f617456f0874&src=http://l.b2b168.com/2017/06/15/15/201706151546106156274.jpg',
                lrc: '[by:Meurababe][00:00.00] ‰ΩúÊõ≤ : Âàò‰ºüÈîã[00:02.343] ‰ΩúËØç : Âàò‰ºüÈîã[00:04.29]ÁºñÊõ≤ÔºöÂàò‰ºüÈîã[00:06.16]ÂΩïÂà∂Ê∑∑Áº©ÔºöÂ∑®‰∫∫ÂÖàÁîü[00:08.16]Âá∫ÂìÅÔºöË•ø‰∫öÊñØÈü≥È¢ëÂ∑•‰ΩúÂÆ§[00:10.04]‰ºÅÂàíÔºöË∞≠Ê¢¶[00:11.04]ÂèëË°åÂÖ¨Âè∏ÔºöÊÅ¨Èü≥ÊñáÂåñ[00:12.50]Â∑ßÂ©∑ÔºåÊàëÁü•ÈÅì‰Ω†Âú®Áúã[00:14.30]ÊàëÂè™ÊÉ≥ÂØπ‰Ω†ËØ¥[00:15.50]I Love You[00:16.50]ËØ¥Â•ΩÂ∏¶‰Ω†ÊµÅÊµ™[00:20.09]ËÄåÊàëÂç¥ÂçäË∑ØËøîËà™[00:22.62]Âù†ËêΩËá™Ë¥£ÁöÑÊµ∑Ê¥ã[00:27.25]Âº†ÂêåÂ≠¶ÔºåÊàëÂñúÊ¨¢‰Ω†[00:30.72]ÂèëÁé∞Á¶ª‰∏çÂºÄ‰Ω†[00:34.21]ÊàëÂºÄÂßãÂÜ≥ÂÆöÂõûÂéª[00:37.80]‰Ω†Â∑≤‰∏çÂú®ÂéüÂú∞[00:42.64]Êúâ‰∏Ä‰ªΩÁà±ÊÉÖÂè´ÂÅöËÖäÈ∏≠üòò[00:44.02]ÊàëÂèØ‰ª•Êé•Âèó‰Ω†ÁöÑÊâÄÊúâ[00:46.16]ÊâÄÊúâÂ∞èËÑæÊ∞î[00:47.54]ÊàëÂèØ‰ª•Â∏¶‰Ω†ÂéªÂêÉÂæàÂ§ö[00:49.73]ÂæàÂ§öÂ•Ω‰∏úË•ø[00:51.13]ÊàëÂèØ‰ª•ÂÅ∂Â∞îÁªô‰Ω†Â∏¶Êù•[00:53.24]Â∏¶Êù•Â∞èÁîúËúú[00:54.65]Â∞±ÂÉèÂâçÂá†Âπ¥ÈÇ£Ê†∑[00:56.05]ÊØèÂ§©ÈÉΩ‰ºöÁªô‰Ω†Âà∂ÈÄ†ÂæàÂ§öÊÉäÂñú[00:58.73]‰Ω†ÁöÑÂøÉ‰º§ ÊàëËÉΩÊ≤ªÊÑà[01:01.80]ÊàëÁöÑÂø´‰πê‰πüÂè™Êúâ‰Ω†ËÉΩÁªô‰∫à[01:06.26]Êàë‰ª¨Â∞±Âà´ÂÜçÂàÜÁ¶ª[01:11.73]ÂèØ‰∏çÂèØ‰ª• Âíå‰Ω†Âú®‰∏ÄËµ∑[01:15.30]Êàë‰ª¨‰πãÈó¥ÊúâÂ§™Â§öÂõûÂøÜ[01:18.82]Áà±‰∏ä‰∫Ü‰Ω† Ê≤°‰ªÄ‰πàÈÅìÁêÜ[01:22.31]Âè™ÊòØÂàöÂ•ΩÊÉÖÁ™¶ÂàùÂºÄÈÅáÂà∞‰Ω†[01:25.82]‰∏çÂ∏åÊúõÊàëÁöÑÊú™Êù•‰∏çÊòØ‰Ω†[01:29.44]Âè™ÊÑøÊÑèÂíå‰Ω†Ê∞∏Ëøú‰∏çÂàÜÁ¶ª[01:33.03]Ë∂ÅÊàëËøòÊ≤°ÊúâËøá‰øùË¥®Êúü[01:36.59]Ë∂Å‰Ω†ËøòÊÑøÊÑè[01:39.64][02:10.34]‰∏âÂπ¥ÁöÑÂõûÂøÜ[02:13.04][02:13.82]ÊàëÂ¶Ç‰ΩïÊäπÂéª[02:17.42]ËÉΩ‰∏çËÉΩÂÜçÊãæËµ∑[02:22.29][02:24.53]Ê∞∏ËøúÂú®‰∏ÄËµ∑[02:27.58][02:28.08]ËøòÊ≤°ÊúâËøáÊúü[02:30.64][02:31.64]Êàë‰ª¨Â∞±Âà´ÂÜçÂàÜÁ¶ª[02:36.44][02:37.23]ÂèØ‰∏çÂèØ‰ª• Âíå‰Ω†Âú®‰∏ÄËµ∑[02:40.44]Êàë‰ª¨‰πãÈó¥ÊúâÂ§™Â§öÂõûÂøÜ[02:44.33]Áà±‰∏ä‰∫Ü‰Ω† Ê≤°‰ªÄ‰πàÈÅìÁêÜ[02:47.72]Âè™ÊòØÂàöÂ•ΩÊÉÖÁ™¶ÂàùÂºÄÈÅáÂà∞‰Ω†[02:51.29]‰∏çÂ∏åÊúõÊàëÁöÑÊú™Êù•‰∏çÊòØ‰Ω†[02:54.79]Âè™ÊÑøÊÑèÂíå‰Ω†Ê∞∏Ëøú‰∏çÂàÜÁ¶ª[02:58.36]Ë∂ÅÊàëËøòÊ≤°ÊúâËøá‰øùË¥®Êúü[03:01.91]Ë∂Å‰Ω†ËøòÊÑøÊÑè[03:05.34]ÂèØ‰∏çÂèØ‰ª• Âíå‰Ω†Âú®‰∏ÄËµ∑[03:09.10]Êàë‰ª¨‰πãÈó¥ÊúâÂ§™Â§öÂõûÂøÜ[03:12.57]Áà±‰∏ä‰∫Ü‰Ω† Ê≤°‰ªÄ‰πàÈÅìÁêÜ[03:16.01]Âè™ÊòØÂàöÂ•ΩÊÉÖÁ™¶ÂàùÂºÄÈÅáÂà∞‰Ω†[03:19.63]‰∏çÂ∏åÊúõÊàëÁöÑÊú™Êù•‰∏çÊòØ‰Ω†[03:23.28]Âè™ÊÑøÊÑèÂíå‰Ω†Ê∞∏Ëøú‰∏çÂàÜÁ¶ª[03:26.79]Ë∂ÅÊàëËøòÊ≤°ÊúâËøá‰øùË¥®Êúü[03:30.29]Ë∂Å‰Ω†ËøòÊÑøÊÑè[03:33.38][03:33.92]Ë∂ÅÊàëËøòÊ≤°ÊúâËøá‰øùË¥®Êúü[03:38.15][03:41.23]Ë∂Å‰Ω†ËøòÊÑøÊÑè',
            }]
        }
    },
    methods:{
        play(){
            this.$refs.player.play()
        },
        openDetail(){ 
            console.log('ÊâìÂºÄÂàóË°®Êí≠ÊîæËØ¶ÊÉÖ')
        }
    },
    mounted() {
        bus.on('addSong',(currentSong)=>{
            let isHas = false
            this.playList.map(item=>{
                if(item.id === currentSong.songId){
                    isHas = true
                }
            })
            if (!isHas) {
                let firstSong = this.playList[0]
                this.playList.splice(0,1,{
                    id: currentSong.songId,
                    title: currentSong.songName,
                    artist: currentSong.singer[0].singerName,
                    src: currentSong.songInfo[0].url,
                    pic: currentSong.picUrl,
                    lrc: currentSong.lrc
                })
                this.playList.push(firstSong)
                // todo ÂàáÊ≠åÂºÇÂ∏∏ÊöÇÂÅú......
            }
        })
        bus.on('playSong',()=>{
            this.play()
        })
    }  
}

</script>

<style scoped>
.page{
    bottom: 1.76rem
}
.aplayer{
    position: fixed;
    z-index: 100;
    width: 100%;
    margin: 0px;
    left: 0;
    bottom: 0;
}
</style>
